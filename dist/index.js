!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=8)}([function(t,n,e){"use strict";var i=e(2),o=e.n(i)()((function(t){return t[1]}));o.push([t.i,'#J-mobile-avatar-crop {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: #000;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n}\n#J-mobile-avatar-crop div[data-role="cropper"] {\n  position: absolute;\n  z-index: 1;\n  box-shadow: rgba(0, 0, 0, 0.4) 0px 0px 0px 999em;\n  border: 1px solid #fff;\n  background: transparent;\n}\n#J-mobile-avatar-crop div[data-role="img-wrap"] {\n  flex-grow: 1;\n  flex-shrink: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  overflow: scroll;\n}\n#J-mobile-avatar-crop div[data-role="img-wrap"].full {\n  align-items: flex-start;\n}\n#J-mobile-avatar-crop div[data-role="img-wrap"] div[data-role="img-cont"] {\n  position: relative;\n}\n#J-mobile-avatar-crop div[data-role="img-wrap"] img {\n  width: 100%;\n  display: block;\n  flex: 100% 0 0;\n}\n#J-mobile-avatar-crop div[data-role="select"] {\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: 50px;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: space-between;\n}\n#J-mobile-avatar-crop div[data-role="select"] div {\n  font-size: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 49% 0 0;\n  background: #ffc107;\n  color: #fff;\n}\n',""]),n.a=o},function(t,n,e){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),s=[];function a(t){for(var n=-1,e=0;e<s.length;e++)if(s[e].identifier===t){n=e;break}return n}function d(t,n){for(var e={},i=[],o=0;o<t.length;o++){var r=t[o],d=n.base?r[0]+n.base:r[0],c=e[d]||0,h="".concat(d," ").concat(c);e[d]=c+1;var u=a(h),l={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(l)):s.push({identifier:h,updater:g(l,n),references:1}),i.push(h)}return i}function c(t){var n=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=e.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(t){n.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(n);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}return n}var h,u=(h=[],function(t,n){return h[t]=n,h.filter(Boolean).join("\n")});function l(t,n,e,i){var o=e?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(n,o);else{var r=document.createTextNode(o),s=t.childNodes;s[n]&&t.removeChild(s[n]),s.length?t.insertBefore(r,s[n]):t.appendChild(r)}}function p(t,n,e){var i=e.css,o=e.media,r=e.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,v=0;function g(t,n){var e,i,o;if(n.singleton){var r=v++;e=f||(f=c(n)),i=l.bind(null,e,r,!1),o=l.bind(null,e,r,!0)}else e=c(n),i=p.bind(null,e,n),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return i(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;i(t=n)}else o()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var e=d(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<e.length;i++){var o=a(e[i]);s[o].references--}for(var r=d(t,n),c=0;c<e.length;c++){var h=a(e[c]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}e=r}}}},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var d=[].concat(t[a]);i&&o[d[0]]||(e&&(d[2]?d[2]="".concat(e," and ").concat(d[2]):d[2]=e),n.push(d))}},n}},function(t,n,e){var i,o;
/*!
 * Draggabilly v2.3.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */!function(r,s){i=[e(4),e(5)],void 0===(o=function(t,n){return function(t,n,e){function i(t,n){for(var e in n)t[e]=n[e];return t}var o=t.jQuery;function r(t,n){this.element="string"==typeof t?document.querySelector(t):t,o&&(this.$element=o(this.element)),this.options=i({},this.constructor.defaults),this.option(n),this._create()}var s=r.prototype=Object.create(e.prototype);r.defaults={},s.option=function(t){i(this.options,t)};var a={relative:!0,absolute:!0,fixed:!0};function d(t,n,e){return e=e||"round",n?Math[e](t/n)*n:t}s._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=i({},this.position);var t=getComputedStyle(this.element);a[t.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},s.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},s.dispatchEvent=function(t,n,e){var i=[n].concat(e);this.emitEvent(t,i),this.dispatchJQueryEvent(t,n,e)},s.dispatchJQueryEvent=function(n,e,i){var o=t.jQuery;if(o&&this.$element){var r=o.Event(e);r.type=n,this.$element.trigger(r,i)}},s._getPosition=function(){var t=getComputedStyle(this.element),n=this._getPositionCoord(t.left,"width"),e=this._getPositionCoord(t.top,"height");this.position.x=isNaN(n)?0:n,this.position.y=isNaN(e)?0:e,this._addTransformPosition(t)},s._getPositionCoord=function(t,e){if(-1!=t.indexOf("%")){var i=n(this.element.parentNode);return i?parseFloat(t)/100*i[e]:0}return parseInt(t,10)},s._addTransformPosition=function(t){var n=t.transform;if(0===n.indexOf("matrix")){var e=n.split(","),i=0===n.indexOf("matrix3d")?12:4,o=parseInt(e[i],10),r=parseInt(e[i+1],10);this.position.x+=o,this.position.y+=r}},s.onPointerDown=function(t,n){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[n])},s.pointerDown=function(t,n){this.okayPointerDown(t)&&this.isEnabled?(this.pointerDownPointer={pageX:n.pageX,pageY:n.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[n])):this._pointerReset()},s.dragStart=function(t,n){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[n]),this.animate())},s.measureContainment=function(){var t=this.getContainer();if(t){var e=n(this.element),i=n(t),o=this.element.getBoundingClientRect(),r=t.getBoundingClientRect(),s=i.borderLeftWidth+i.borderRightWidth,a=i.borderTopWidth+i.borderBottomWidth,d=this.relativeStartPosition={x:o.left-(r.left+i.borderLeftWidth),y:o.top-(r.top+i.borderTopWidth)};this.containSize={width:i.width-s-d.x-e.width,height:i.height-a-d.y-e.height}}},s.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},s.onPointerMove=function(t,n,e){this.dispatchJQueryEvent("pointerMove",t,[n,e])},s.dragMove=function(t,n,e){if(this.isEnabled){var i=e.x,o=e.y,r=this.options.grid,s=r&&r[0],a=r&&r[1];i=d(i,s),o=d(o,a),i=this.containDrag("x",i,s),o=this.containDrag("y",o,a),i="y"==this.options.axis?0:i,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+i,this.position.y=this.startPosition.y+o,this.dragPoint.x=i,this.dragPoint.y=o,this.dispatchEvent("dragMove",t,[n,e])}},s.containDrag=function(t,n,e){if(!this.options.containment)return n;var i="x"==t?"width":"height",o=d(-this.relativeStartPosition[t],e,"ceil"),r=this.containSize[i];return r=d(r,e,"floor"),Math.max(o,Math.min(r,n))},s.onPointerUp=function(t,n){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[n])},s.dragEnd=function(t,n){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[n]))},s.animate=function(){if(this.isDragging){this.positionDrag();var t=this;requestAnimationFrame((function(){t.animate()}))}},s.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},s.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},s.staticClick=function(t,n){this.dispatchEvent("staticClick",t,[n])},s.setPosition=function(t,n){this.position.x=t,this.position.y=n,this.setLeftTop()},s.enable=function(){this.isEnabled=!0},s.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},s.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},s._init=function(){},o&&o.bridget&&o.bridget("draggabilly",r);return r}(r,t,n)}.apply(n,i))||(t.exports=o)}(window)},function(t,n,e){var i,o;
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */window,void 0===(o="function"==typeof(i=function(){"use strict";function t(t){var n=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(n)&&n}var n="undefined"==typeof console?function(){}:function(t){console.error(t)},e=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i=e.length;function o(t){var e=getComputedStyle(t);return e||n("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var r,s=!1;function a(n){if(function(){if(!s){s=!0;var n=document.createElement("div");n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style.boxSizing="border-box";var e=document.body||document.documentElement;e.appendChild(n);var i=o(n);r=200==Math.round(t(i.width)),a.isBoxSizeOuter=r,e.removeChild(n)}}(),"string"==typeof n&&(n=document.querySelector(n)),n&&"object"==typeof n&&n.nodeType){var d=o(n);if("none"==d.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<i;n++)t[e[n]]=0;return t}();var c={};c.width=n.offsetWidth,c.height=n.offsetHeight;for(var h=c.isBorderBox="border-box"==d.boxSizing,u=0;u<i;u++){var l=e[u],p=d[l],f=parseFloat(p);c[l]=isNaN(f)?0:f}var v=c.paddingLeft+c.paddingRight,g=c.paddingTop+c.paddingBottom,m=c.marginLeft+c.marginRight,b=c.marginTop+c.marginBottom,y=c.borderLeftWidth+c.borderRightWidth,x=c.borderTopWidth+c.borderBottomWidth,w=h&&r,E=t(d.width);!1!==E&&(c.width=E+(w?0:v+y));var _=t(d.height);return!1!==_&&(c.height=_+(w?0:g+x)),c.innerWidth=c.width-(v+y),c.innerHeight=c.height-(g+x),c.outerWidth=c.width+m,c.outerHeight=c.height+b,c}}return a})?i.call(n,e,n,t):i)||(t.exports=o)},function(t,n,e){var i,o;
/*!
 * Unidragger v2.3.1
 * Draggable base class
 * MIT license
 */!function(r,s){i=[e(6)],void 0===(o=function(t){return function(t,n){"use strict";function e(){}var i=e.prototype=Object.create(n.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(n){for(var e=(n=void 0===n||n)?"addEventListener":"removeEventListener",i=n?this._touchActionValue:"",o=0;o<this.handles.length;o++){var r=this.handles[o];this._bindStartEvent(r,n),r[e]("click",this),t.PointerEvent&&(r.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,n){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:n.pageX,pageY:n.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,n]))};var o={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var n=o[t.target.nodeName],e=r[t.target.type],i=!n||e;return i||this._pointerReset(),i},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,n){var e=this._dragPointerMove(t,n);this.emitEvent("pointerMove",[t,n,e]),this._dragMove(t,n,e)},i._dragPointerMove=function(t,n){var e={x:n.pageX-this.pointerDownPointer.pageX,y:n.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(e)&&this._dragStart(t,n),e},i.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},i.pointerUp=function(t,n){this.emitEvent("pointerUp",[t,n]),this._dragPointerUp(t,n)},i._dragPointerUp=function(t,n){this.isDragging?this._dragEnd(t,n):this._staticClick(t,n)},i._dragStart=function(t,n){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,n)},i.dragStart=function(t,n){this.emitEvent("dragStart",[t,n])},i._dragMove=function(t,n,e){this.isDragging&&this.dragMove(t,n,e)},i.dragMove=function(t,n,e){t.preventDefault(),this.emitEvent("dragMove",[t,n,e])},i._dragEnd=function(t,n){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,n)},i.dragEnd=function(t,n){this.emitEvent("dragEnd",[t,n])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,n){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,n),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,n){this.emitEvent("staticClick",[t,n])},e.getPointerPoint=n.getPointerPoint,e}(r,t)}.apply(n,i))||(t.exports=o)}(window)},function(t,n,e){var i,o;
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */!function(r,s){i=[e(7)],void 0===(o=function(t){return function(t,n){"use strict";function e(){}var i=e.prototype=Object.create(n.prototype);i.bindStartEvent=function(t){this._bindStartEvent(t,!0)},i.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},i._bindStartEvent=function(n,e){var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",o="mousedown";t.PointerEvent?o="pointerdown":"ontouchstart"in t&&(o="touchstart"),n[i](o,this)},i.handleEvent=function(t){var n="on"+t.type;this[n]&&this[n](t)},i.getTouch=function(t){for(var n=0;n<t.length;n++){var e=t[n];if(e.identifier==this.pointerIdentifier)return e}},i.onmousedown=function(t){var n=t.button;n&&0!==n&&1!==n||this._pointerDown(t,t)},i.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},i.onpointerdown=function(t){this._pointerDown(t,t)},i._pointerDown=function(t,n){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==n.pointerId?n.pointerId:n.identifier,this.pointerDown(t,n))},i.pointerDown=function(t,n){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,n])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return i._bindPostStartEvents=function(n){if(n){var e=o[n.type];e.forEach((function(n){t.addEventListener(n,this)}),this),this._boundPointerEvents=e}},i._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(n){t.removeEventListener(n,this)}),this),delete this._boundPointerEvents)},i.onmousemove=function(t){this._pointerMove(t,t)},i.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},i.ontouchmove=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerMove(t,n)},i._pointerMove=function(t,n){this.pointerMove(t,n)},i.pointerMove=function(t,n){this.emitEvent("pointerMove",[t,n])},i.onmouseup=function(t){this._pointerUp(t,t)},i.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},i.ontouchend=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerUp(t,n)},i._pointerUp=function(t,n){this._pointerDone(),this.pointerUp(t,n)},i.pointerUp=function(t,n){this.emitEvent("pointerUp",[t,n])},i._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},i._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},i.pointerDone=function(){},i.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},i.ontouchcancel=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerCancel(t,n)},i._pointerCancel=function(t,n){this._pointerDone(),this.pointerCancel(t,n)},i.pointerCancel=function(t,n){this.emitEvent("pointerCancel",[t,n])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e}(r,t)}.apply(n,i))||(t.exports=o)}(window)},function(t,n,e){var i,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(i=function(){"use strict";function t(){}var n=t.prototype;return n.on=function(t,n){if(t&&n){var e=this._events=this._events||{},i=e[t]=e[t]||[];return-1==i.indexOf(n)&&i.push(n),this}},n.once=function(t,n){if(t&&n){this.on(t,n);var e=this._onceEvents=this._onceEvents||{};return(e[t]=e[t]||{})[n]=!0,this}},n.off=function(t,n){var e=this._events&&this._events[t];if(e&&e.length){var i=e.indexOf(n);return-1!=i&&e.splice(i,1),this}},n.emitEvent=function(t,n){var e=this._events&&this._events[t];if(e&&e.length){e=e.slice(0),n=n||[];for(var i=this._onceEvents&&this._onceEvents[t],o=0;o<e.length;o++){var r=e[o];i&&i[r]&&(this.off(t,r),delete i[r]),r.apply(this,n)}return this}},n.allOff=function(){delete this._events,delete this._onceEvents},t})?i.call(n,e,n,t):i)||(t.exports=o)},function(t,n,e){"use strict";e.r(n);var i=e(1),o=e.n(i),r=e(0),s={insert:"head",singleton:!1},a=(o()(r.a,s),r.a.locals,e(3)),d=e.n(a);function c(t,n){return t.querySelectorAll('[data-role="'+n+'"]')}function h(t){let n=`\n        <div id="J-mobile-avatar-crop">\n            <div data-role="img-wrap">\n                <div data-role="img-cont">\n                    <img src="${t.url}">\n                    <div data-role="cropper" style="left: 0px;top: 0px;width: ${t.size}px;height: ${t.size}px;">\n                        <div data-role="scal-top-left"></div>\n                        <div data-role="scal-top-right"></div>\n                        <div data-role="scal-bottom-left"></div>\n                        <div data-role="scal-bottom-left"></div>\n                    </div>\n                </div>\n            </div>\n            <div data-role="select">\n                <div data-role="cancel">${t.txtCancel}</div>\n                <div data-role="ok">${t.txtOk}</div>\n            </div>\n        </div>`,e=(i=n,(o=document.createElement("template")).innerHTML=i,o.content);var i,o;document.body.appendChild(e)}function u({domCropper:t,domImg:n}){const{clientWidth:e,naturalWidth:i}=n;let{clientWidth:o,clientHeight:r}=t,{top:s,left:a}=t.style,d=i/e;o=o*d|0,r=r*d|0,s=parseInt(s)*d|0,a=parseInt(a)*d|0,console.log(e,i,o,r,s,a);let c=function(t,n){let e=document.createElement("canvas");return window.devicePixelRatio,e.width=t,e.height=n,Object.assign(e.style,{position:"absolute",visibility:"hidden"}),document.body.appendChild(e),e}(o,r);return c.getContext("2d").drawImage(n,a,s,o,r,0,0,o,r),c}function l(t,n,{size:e=100}={}){h({url:t,txtCancel:"取消",txtOk:"确认",size:e});let i=document.getElementById("J-mobile-avatar-crop"),o=c(i,"img-wrap")[0],r=c(o,"img-cont")[0],s=o.querySelector("img"),a=c(o,"cropper")[0],l=c(i,"cancel")[0],p=c(i,"ok")[0];(function(t,n){return new Promise((function(e,i){let o=n.clientHeight,r=t.clientHeight;0===o?n.addEventListener("load",(function(){o=n.clientHeight,o>=r&&(t.classList.add("full"),e(!0)),e(!1)}),!1):o>=r&&(t.classList.add("full"),e(!0)),e(!1)}))})(o,s).then((function(t){!function({domCrop:t,domCropper:n,domImgWrap:e,domImgCont:i,domImg:o,domBtnOk:r,domBtnCancel:s,isImgOut:a},c){let h=()=>{document.body.removeChild(t)};r.addEventListener("click",()=>{c(u({domCropper:n,domImg:o}).toDataURL()),h()},!1),s.addEventListener("click",()=>{c(!1),h()},!1),new d.a(n,{containment:i})}({domCrop:i,domImgWrap:o,domImgCont:r,domImg:s,domCropper:a,domBtnOk:p,domBtnCancel:l,isImgOut:t},n)}))}function p(t,n,{size:e=100}={}){t.addEventListener("change",()=>{(function(t){return new Promise((function(n,e){let i=t.files[0],o=new FileReader;o.readAsDataURL(i),o.onload=function(t){n(t.target.result)}}))})(t).then(i=>{l(i,n,{size:e}),t.value=""})},!1)}window.mobileAvatarCrop=p;n.default=p}]);